<html lang="en-US">
<head>
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta charset="UTF-8">
    <title>Mėmelio Žirafos - Facebook feeds page</title>
    <link rel="icon" href="http://www.mzirafos.lt/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="http://www.mzirafos.lt/favicon.ico" type="image/x-icon" />
    <style>
        .fa-refresh {
            display: block;
            font-size: 40px;
            text-align: center;
        }

        html {
            overflow-y:scroll;
        }

    </style>
</head>
<body>

<div class="progress" style="top: 50%;width: 50%;margin: 0 auto;">
    <div class="indeterminate"></div>
</div>

<div class="preloader-wrap-cust hidden" style="display: none;">

    <header style="margin-bottom: 50px;">
        <nav class="top-nav">

            <div class="container">
                <div class="nav-wrapper">
                    <p>Mėmelio Žirafos Facebook feeds page</p>
                    <!--<p>Facebook feeds page</p>-->
                    <!--<a href="#">Facebook feeds page</a>-->
                </div>
            </div>
        </nav>

    </header>

    <div class="container">
        <div class="row">
            <div class="input-field col s6">
                <i class="material-icons prefix">error_outline</i>
                <input value="" id="first_name2" type="text" class="validate">
                <label class="active" for="first_name2">Enter Facebook page slug</label>
            </div>

            <!--<i class="material-icons prefix">reorder</i>-->
            <div class="input-field col s6">
                <select class="select-fb-acc">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="sisaidgallery">sisaidgallery</option>
                    <option value="duzenos">Duzenos</option>
                    <option value="bbcnews">BBC News</option>
                    <option value="Klaipeda.renginiai">Renginiai Klaipeda</option>
                    <option value="PORTbyBarBara">PORT night club by BarBar'a</option>
                    <option value="Kastonas">Kaštonas/ChestNut</option>
                    <option value="klaipedosdramosteatras">Klaipėdos dramos teatras</option>
                    <option value="238899589464193">Žvejų Baras</option>
                </select>
                <label>Or choose one of the following</label>
            </div>

            <div class="input-field col s12">
                <a class="waves-effect waves-light btn"><i class="material-icons right">zoom_in</i>Show posts</a>
            </div>

        </div>
    </div>



<div class="container">
    <div class="col-xs-6" id="simpsons">
        <h3 class="center-align" id="posts-acc-title">Duzenos posts</h3>
        <div class="jumbotron">
            <i class="fa fa-spin fa-refresh"></i>
        </div>
    </div>
    <!--<div class="col-xs-6" id="familyguy">-->
        <!--<h1>sisaidgallery posts</h1>-->
        <!--<div class="jumbotron">-->
            <!--<i class="fa fa-spin fa-refresh"></i>-->
        <!--</div>-->
    <!--</div>-->
</div>

</div>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sugar/1.4.1/sugar.min.js"></script>

<script>

    $(function(){
        $('.progress').delay(1000).fadeOut();
        $('.preloader-wrap-cust').delay(1500).fadeIn();
    });

    $(document).ready(function() {
        $('select').material_select();
    });


</script>


<script>
    (function() {
        var token = 'CAAQYWWjo5zkBAKNWF2HlflTTgPSMATHC8Ecp6vZANJ5ZAUABYwilDeekf1cayODlqXNZATKv4dkwdi6PIqY3EGA2ZAEO2pvxEeD1SxwribyZCTIJz1zmBgkKnP8jEVbdhoZBt8IrbvToS9WVW3bWMWBHiLBOx5U5ZCn4xT1lIyGI3niAEaRZCa1g';

        var connector = '&access_token=';

        var baseURL = 'https://graph.facebook.com/v2.4/';

        var makeAjax = function(fbUrl, next) {
            $.ajax({
                url: baseURL + fbUrl + connector + token,
            }).done(function(data) {
                next(data);
            });
        };

        var bindSimpsons = function(data) {
            domManipulation('#simpsons .jumbotron', data);
        };

        var bindFamilyguy = function(data) {
            domManipulation('#familyguy .jumbotron', data);
        };

        var domManipulation = function(node, data) {
            var html = '<ul>';

            data.data.forEach(function(row) {

                var postImage = "";
                var descroptionas = "";
                var zinute = "";

                if(row.picture !== undefined){
                    postImage = row.picture;
                }

                if(row.description !== undefined){
                    descroptionas = row.description;
                }

                if(row.message !== undefined){
                    zinute = row.message;
                }

//                html += '<li> <a href=" ' + row.link + ' "> <b>' + row.created_time + ':</b> ' + zinute + descroptionas + ' <img class="img-responsive" src=" '+ postImage +' "> </a></li>';

                html += '<div class="row"><div class="col s12 m12"><div class="card blue-grey darken-1 hoverable"><div class="card-content white-text"><span class="card-title" style="font-size: 14px;">Posted at: '+ Date.create(row.created_time).format('{HH}:{mm}, {Weekday}, {d} {Month}, {yyyy}') +' </span>   <div class="row"><div class="col s2"><p><img class="responsive-img" src=" '+ postImage +' " alt=""/></p></div>    <div class="col s10"><h5 style="margin-top: 0;"> '+ zinute +' </h5><p> '+ descroptionas +' </p></div></div>   </div><div class="card-action"><a target="_blank" href=" '+ row.link +' ">Open post<i class="material-icons" style="position: relative;top: 3px; font-size: 16px; padding-left: 5px;">launch</i></a></div></div></div></div>'

            });

            html += '</ul>';

            $(node).html(html);
        };

        var ola = $('#first_name2').val();
        var selectVal = $('#select-options > li > span').val();
        var selectValOption = $('.select-fb-acc').val();
//        console.log("selectVal is: " + selectVal);
//        console.log("selectValOption is: " + selectValOption);


        $( ".select-fb-acc" ).change(function() {

            $('#simpsons').hide();

            var selectValueHere = ($(this).val());
            var selectTextValue = $( ".select-fb-acc option:selected").text();
            makeAjax( selectValueHere + '/feed?fields=picture,created_time,message,link,description', bindSimpsons);
            $('#posts-acc-title').text(selectTextValue + ' posts');

            setTimeout(function(){
                $('#simpsons').fadeIn('500');
            }, 600);

        });

        $( ".waves-light" ).click(function() {

            var ola = $('#first_name2').val();

            if( ola !== "" ){
                $('#posts-acc-title').text(ola + ' posts');
                $('#simpsons').hide();
                makeAjax( ola + '/feed?fields=picture,created_time,message,link,description', bindSimpsons);

                setTimeout(function(){
                    $('#simpsons').fadeIn('500');
                }, 600);

            }
            else{
                alert('Please enter slug');
            }

        });

        makeAjax('duzenos/feed?fields=picture,created_time,message,link,description', bindSimpsons);
//        makeAjax('sisaidgallery/feed?fields=picture,created_time,message,link,description', bindFamilyguy);

//        $('.waves-light').click();

    })();
</script>
</body>
</html>










