<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <style>
        .fa-refresh {
            display: block;
            font-size: 40px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="col-xs-6" id="simpsons">
        <h1>The Duzenos news</h1>
        <div class="jumbotron">
            <i class="fa fa-spin fa-refresh"></i>
        </div>
    </div>
    <div class="col-xs-6" id="familyguy">
        <h1>sisaidgallery news</h1>
        <div class="jumbotron">
            <i class="fa fa-spin fa-refresh"></i>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>
    (function() {
        var token = 'CAAQYWWjo5zkBAOC2xmkF2BbPPVjreHZBU9ez1vJzOmqD6chd4ZCBAG0yVo2OpQuVvcGl6VYInzl0ytLI3CUjHPWZAtchOClJm0vUQykYFbtZB4KRfU1yVZCSyM6IZAhYWl8KFliRMUDmMrdzLOcS01DxvaN8fijHfzrMdqL9sXCPrlPpBr3VOBOTtnxhxjUHZAYGCB3NfPa9wZDZD';

        var connector = '&access_token=';

        var baseURL = 'https://graph.facebook.com/v2.4/';

        var makeAjax = function(fbUrl, next) {
            $.ajax({
                url: baseURL + fbUrl + connector + token,
            }).done(function(data) {
                next(data);
            });
        };

        var bindSimpsons = function(data) {
            domManipulation('#simpsons .jumbotron', data);
        };

        var bindFamilyguy = function(data) {
            domManipulation('#familyguy .jumbotron', data);
        };

        var domManipulation = function(node, data) {
            var html = '<ul>';

            data.data.forEach(function(row) {

                if(row.full_picture !== undefined){
                    var postImage = row.full_picture;
                }

                html += '' +
                '<li>' +
                '<a href=" ' + row.link + ' ">' +
                '<b>' + row.created_time + ':</b> ' +
                row.message +
                row.full_picture === undefined ? '' : ' <img class="img-responsive" src=" '+ row.full_picture +' ">'
                '</a>' +
                '</li>';
            });

            html += '</ul>';

            $(node).html(html);
        };

        makeAjax('duzenos/feed?fields=full_picture,created_time,message,link', bindSimpsons);
        makeAjax('sisaidgallery/feed?fields=full_picture,created_time,message,link', bindFamilyguy);

    })();
</script>
</body>
</html>
